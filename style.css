:root { 
    --bg-deep: #050510;
    --panel-bg: rgba(15, 20, 35, 0.9); /* ç¨å¾®åŠ æ·±åº•è‰²ï¼Œæé«˜æ–‡å­—å¯¹æ¯”åº¦ */
    --neon-blue: #00f3ff;
    --neon-pink: #bc13fe;
    --neon-gold: #ffd700;
    --neon-green: #0aff60;
    --text-main: #e0faff;
}

/* === ğŸŒŒ èµ›åšæ˜Ÿäº‘Â·åŠ¨æ€èƒŒæ™¯ === */
body {
    font-family: 'Segoe UI', 'Roboto', 'Microsoft YaHei', sans-serif;
    margin: 0; padding: 20px;
    min-height: 100vh;
    color: var(--text-main);
    display: flex; flex-direction: column; align-items: center;
    overflow-x: hidden;
    font-size: 16px; /* ğŸ”¥ æ ¸å¿ƒä¿®æ”¹ï¼šå…¨å±€å­—ä½“åŠ å¤§ */

    background-color: var(--bg-deep);
    background-image: 
        radial-gradient(circle at 10% 20%, rgba(188, 19, 254, 0.2) 0%, transparent 40%),
        radial-gradient(circle at 90% 80%, rgba(0, 243, 255, 0.2) 0%, transparent 40%),
        linear-gradient(0deg, rgba(0,0,0,0.6) 0%, transparent 100%);
    background-attachment: fixed;
    animation: nebula-pulse 10s infinite alternate;
}

body::after {
    content: ""; position: fixed; inset: 0;
    background-image: linear-gradient(rgba(0, 255, 255, 0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0, 255, 255, 0.03) 1px, transparent 1px);
    background-size: 30px 30px; z-index: -1; pointer-events: none;
}
@keyframes nebula-pulse { 0% { background-size: 100% 100%; } 100% { background-size: 110% 110%; } }

/* === ğŸ’ å®½å±å¸ƒå±€ === */
.header, .main-container, .log-panel, .resource-bar { 
    width: 95%; max-width: 1400px; margin-bottom: 25px; 
}

.panel, .resource-bar, .log-panel, .modal-content {
    background: var(--panel-bg);
    backdrop-filter: blur(15px);
    border: 1px solid rgba(0, 243, 255, 0.2);
    box-shadow: 0 0 15px rgba(0, 243, 255, 0.1), inset 0 0 30px rgba(0,0,0,0.5);
    border-radius: 12px;
    padding: 25px; /* åŠ å¤§å†…è¾¹è· */
    position: relative;
}

/* è£…é¥°å…‰æ¡ */
.panel::before {
    content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 2px;
    background: linear-gradient(90deg, transparent, var(--neon-blue), transparent);
    animation: scan-line 3s infinite linear;
}
@keyframes scan-line { 0%{transform:translateX(-100%)} 100%{transform:translateX(100%)} }

/* === ğŸ§¬ å¤§å·æ ‡é¢˜ä¸æ–‡å­— === */
h1 { 
    font-size: 2.4rem; /* åŠ å¤§ */
    margin: 0; 
    background: linear-gradient(to right, #fff, var(--neon-blue));
    -webkit-background-clip: text; color: transparent;
    text-shadow: 0 0 20px rgba(0,243,255,0.6);
}
h3 { font-size: 1.5rem; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 15px; color: var(--neon-blue); margin-bottom: 20px; }

/* === ğŸ“œ æ»šåŠ¨æ—¥å¿— (åŠ å¤§å­—å·) === */
.log-content {
    background: rgba(0, 10, 20, 0.8);
    border: 1px solid #333;
    border-left: 4px solid var(--neon-green);
    border-radius: 6px;
    padding: 15px;
    font-family: 'Consolas', monospace;
    font-size: 14px; /* åŠ å¤§ */
    color: var(--neon-green);
    text-shadow: 0 0 5px rgba(10, 255, 96, 0.4);
    height: 180px; /* åŠ é«˜ */
    overflow-y: auto;
    line-height: 1.6;
}
.log-content::-webkit-scrollbar { width: 8px; }
.log-content::-webkit-scrollbar-thumb { background: var(--neon-blue); border-radius: 4px; }

/* === ğŸ§¬ å¡ç‰‡ä¸ç½‘æ ¼ === */
.grid { 
    display: grid; 
    grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); /* åŠ å®½å¡ç‰‡ */
    gap: 15px; 
}

.card {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    padding: 12px;
    display: flex; flex-direction: column; align-items: center;
    cursor: pointer;
    transition: 0.3s;
    position: relative;
}
.card:hover { border-color: var(--neon-blue); box-shadow: 0 0 15px var(--neon-blue); transform: translateY(-5px); z-index: 10; }
.card.focused { border-color: var(--neon-gold); box-shadow: 0 0 20px var(--neon-gold); background: rgba(255, 215, 0, 0.1); }
.card.in-fusion { opacity: 0.5; filter: grayscale(1); }

/* ğŸ’€ æ­»äº¡å¡ç‰‡æ ·å¼ */
.card.dead { 
    filter: grayscale(1); 
    opacity: 0.7; 
    border: 2px solid #f44; /* æ˜æ˜¾çš„çº¢æ¡† */
    background: rgba(50, 0, 0, 0.3);
}
.card.dead::after {
    content: 'å·²æ­»äº¡';
    position: absolute;
    top: 50%; left: 50%; transform: translate(-50%, -50%);
    font-size: 14px; font-weight: bold; color: #f44;
    border: 1px solid #f44; padding: 2px 5px;
    background: rgba(0,0,0,0.8);
    pointer-events: none;
}

/* å°çƒ */
.ball-wrapper { width: 60px; height: 60px; position: relative; margin: 10px auto; background: #000; border-radius: 50%; box-shadow: 0 0 10px rgba(255,255,255,0.1); }
.ball-wrapper.big { width: 120px; height: 120px; }
.ball { width: 100%; height: 100%; border-radius: 50%; position: absolute; inset:0; box-shadow: inset -5px -5px 15px rgba(0,0,0,0.8); z-index: 5; }

/* === ğŸ”˜ æŒ‰é’®åŠ å¤§ === */
button {
    background: rgba(0,0,0,0.3); color: var(--neon-blue);
    border: 1px solid var(--neon-blue);
    padding: 10px 20px; /* åŠ å¤§ */
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold; font-size: 14px;
    text-transform: uppercase; transition: 0.3s;
    box-shadow: 0 0 5px rgba(0,243,255,0.1);
}
button:hover { background: var(--neon-blue); color: #000; box-shadow: 0 0 20px var(--neon-blue); }
.danger-btn { color: #f44; border-color: #f44; }
.danger-btn:hover { background: #f44; color: #fff; box-shadow: 0 0 20px #f44; }

.btn-breed { width: 100%; padding: 18px; margin-top: 20px; font-size: 18px; letter-spacing: 2px; }
.btn-breed.ready { background: linear-gradient(45deg, var(--neon-blue), #0055ff); color: #fff; border: none; animation: glow 2s infinite; }
.btn-breed.danger { background: linear-gradient(45deg, #ff0055, #ff4400); border: none; color: white; }
.btn-breed.disabled { background: #222; border: 1px solid #444; color: #555; cursor: not-allowed; }
@keyframes glow { 0%{box-shadow:0 0 5px var(--neon-blue)} 50%{box-shadow:0 0 25px var(--neon-blue)} 100%{box-shadow:0 0 5px var(--neon-blue)} }

/* === ğŸ› ï¸ å…¶ä»– === */
.hidden { display: none !important; }
.resource-bar { justify-content: center; font-size: 26px; color: var(--neon-gold); text-shadow: 0 0 15px var(--neon-gold); border-color: var(--neon-gold); }
.slot-box { display: flex; justify-content: center; gap: 25px; margin-bottom: 25px; }
.slot { width: 100px; height: 140px; border: 1px dashed rgba(255,255,255,0.3); border-radius: 12px; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }
.slot.filled { border: 1px solid var(--neon-blue); background: rgba(0, 243, 255, 0.1); box-shadow: inset 0 0 20px rgba(0,243,255,0.2); }
.slot-remove { position: absolute; top: -10px; right: -10px; background: #f44; color: white; border-radius: 50%; width: 24px; height: 24px; text-align: center; line-height: 24px; display: none; cursor: pointer; z-index: 20; box-shadow: 0 0 10px #f00; }
.slot.filled .slot-remove { display: block; }

#overlay, #modal, #tree-modal, #help-modal { position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 999; display: flex; justify-content: center; align-items: center; backdrop-filter: blur(8px); }
.modal-content { max-width: 800px; width: 95%; max-height: 90vh; overflow-y: auto; border: 1px solid var(--neon-blue); box-shadow: 0 0 60px rgba(0,243,255,0.2); }
.close-btn { position: absolute; top: 15px; right: 20px; font-size: 28px; cursor: pointer; color: #fff; transition: 0.3s; }
.close-btn:hover { color: var(--neon-pink); transform: rotate(90deg); }
.gene-map-box { display: flex; justify-content: center; gap: 20px; background: #000; padding: 20px; border-radius: 8px; border: 1px solid #333; margin: 15px 0; font-family: 'Courier New', monospace; font-size: 16px; color: #ddd; white-space: nowrap; overflow-x: auto; box-shadow: inset 0 0 20px #000; }
.drama-box { position: fixed; top: 20%; left: 50%; transform: translateX(-50%); background: rgba(255, 0, 0, 0.8); border: 2px solid #f00; padding: 15px 30px; border-radius: 50px; font-weight: bold; color: white; text-shadow: 0 0 5px #000; z-index: 2000; pointer-events: none; transition: opacity 0.5s; opacity: 0; box-shadow: 0 0 30px #f00; font-size: 18px; }
.drama-box.show { opacity: 1; }
.info-icon { position: absolute; top: 5px; right: 5px; width: 18px; height: 18px; background: #555; border-radius: 50%; font-size: 11px; text-align: center; line-height: 18px; color: #fff; z-index: 5; }

/* === ğŸ§¬ æ ¸å¿ƒç‰¹æ•ˆåº“ (ä¸è¦åŠ¨ï¼) === */
.fx-scourge { overflow: visible !important; }
.fx-scourge::before { content:''; position:absolute; inset:2px; border-radius:50%; background:radial-gradient(circle, #f0f, #300); mix-blend-mode:hard-light; animation:p 1s infinite alternate; z-index: 3; }
.fx-scourge::after { content:''; position:absolute; inset:-4px; border-radius:45%; border:2px dashed #f05; animation:r 4s linear infinite; z-index: 4; }
.fx-plasma::before { content:''; position:absolute; inset:-3px; border-radius:50%; border:2px solid var(--neon-blue); animation:r 2s linear infinite; }
.fx-void-core { background:#000 !important; box-shadow:inset 0 0 20px #000; }
.fx-void-core::after { content:''; position:absolute; inset:-5px; border-radius:50%; background:radial-gradient(transparent, #000); box-shadow:0 0 10px #408; animation:p 2s infinite; }
.fx-radiant { box-shadow:0 0 20px var(--neon-gold); border:2px solid #fff !important; }
.fx-glitch-heavy { clip-path:polygon(0 0, 100% 0, 100% 80%, 0 100%); animation:p 0.1s infinite; filter:contrast(2); }
.fx-crystal { background-image:conic-gradient(from 0deg, rgba(255,255,255,0.5), transparent) !important; border:1px solid rgba(255,255,255,0.5) !important; }
.fx-neon { box-shadow:0 0 8px 2px currentColor; border:2px solid #fff !important; }
.fx-pixel { image-rendering:pixelated; box-shadow:inset 0 0 0 2px #000; }
.shape-square { border-radius: 10% !important; }
.shape-pill { border-radius: 50px/20px !important; }
.shape-diamond { transform: rotate(45deg) scale(0.8); border-radius: 10% !important; }
.def-cyclops::after { content:''; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); width:35%; height:35%; background:#000; border:2px solid #fff; border-radius:50%; z-index: 11; box-shadow: 0 0 5px #f00; }
.def-withered { transform:scale(0.7); filter:grayscale(0.8); border:1px dashed #666 !important; }
.def-meltdown { border-radius:40% 60% 70% 30% / 50%; animation:p 0.5s infinite; filter:hue-rotate(90deg); box-shadow: 0 0 15px #0f0; }
@keyframes p { 0%{opacity:0.7; transform:scale(0.95)} 100%{opacity:1; transform:scale(1.05)} }
@keyframes r { 0%{transform:rotate(0deg)} 100%{transform:rotate(360deg)} }
.shake-hard { animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both; }
@keyframes shake { 10%, 90% { transform: translate3d(-2px, 0, 0); } 20%, 80% { transform: translate3d(4px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-8px, 0, 0); } 40%, 60% { transform: translate3d(8px, 0, 0); } }
/* =========================================
   ğŸ”§ V41.1 - ç•Œé¢å°ºå¯¸å¾®è°ƒè¡¥ä¸
   (æŠŠè¿™æ®µåŠ åˆ° style.css æœ€åº•éƒ¨å³å¯ç”Ÿæ•ˆ)
   ========================================= */

/* 1. è°ƒæ•´ã€èµ„é‡‘æ ã€‘(é¡¶éƒ¨é‚£æ¡) */
.resource-bar {
    /* â¬†ï¸ é«˜åº¦è°ƒæ•´ï¼šå¢åŠ ä¸Šä¸‹å†…è¾¹è· (åŸæ¥å¯èƒ½æ˜¯ 15px) */
    padding-top: 25px !important;
    padding-bottom: 25px !important;

    /* â†”ï¸ å®½åº¦è°ƒæ•´ï¼šè®©å®ƒå æ»¡å±å¹•å®½åº¦çš„ç™¾åˆ†æ¯” */
    width: 95% !important; 
    max-width: 1600px !important; /* æœ€å¤§å®½åº¦é™åˆ¶ï¼Œé˜²æ­¢åœ¨è¶…å¤§å±å¹•å¤ªé•¿ */
    
    /* å­—ä½“å¤§å°å¾®è°ƒ */
    font-size: 28px !important; 
}

/* 2. è°ƒæ•´ã€ä¸­é—´å¤§å®¹å™¨ã€‘(åŒ…å«å·¦è¾¹ç¹è‚²+å³è¾¹æ ·æœ¬åº“) */
.main-container {
    width: 98% !important;
    max-width: 1600px !important;
    
    /* è¿™é‡Œçš„ display: flex æ˜¯å…³é”®ï¼Œå†³å®šäº†å·¦å³ä¸¤è¾¹çš„æ¯”ä¾‹ */
    display: flex;
    gap: 20px; /* å·¦å³ä¸¤ä¸ªæ¡†ä¸­é—´çš„ç¼éš™ */
}

/* 3. è°ƒæ•´ã€å·¦ä¾§ï¼šç¹è‚²èˆ±ã€‘ */
.left-panel {
    /* â†”ï¸ å®½åº¦æƒé‡ï¼š1ä»½ */
    flex: 1; 
    
    /* å¼ºåˆ¶æœ€å°å®½åº¦ï¼Œé˜²æ­¢è¢«å‹æ‰ */
    min-width: 350px !important; 
}

/* 4. è°ƒæ•´ã€å³ä¾§ï¼šæ ·æœ¬æ”¶å®¹æ‰€ã€‘(ä½ è¦è°ƒçš„é‚£ä¸ªæ¡†æ¡†) */
.right-panel {
    /* â†”ï¸ å®½åº¦æƒé‡ï¼šæ”¹ä¸º 3 (æ„æ€æ˜¯å®ƒæ¯”å·¦è¾¹å®½ 3 å€ï¼) */
    /* ä½ å¯ä»¥æ”¹æˆ 2 æˆ– 4 è¯•è¯•æ•ˆæœ */
    flex: 3 !important; 

    /* â†•ï¸ é«˜åº¦æ§åˆ¶ï¼šè®¾ç½®ä¸€ä¸ªæœ€å°é«˜åº¦ï¼Œè®©å®ƒçœ‹èµ·æ¥æ›´éœ¸æ°” */
    min-height: 600px !important; 
}

/* 5. è°ƒæ•´ã€åº•éƒ¨ï¼šæ¢ç´¢æ§åˆ¶å°ã€‘ */
.log-panel {
    width: 95% !important;
    max-width: 1600px !important;
    
    /* è®©æ—¥å¿—æ¡†æœ¬èº«ä¹Ÿå˜é«˜ä¸€ç‚¹ */
    height: auto !important;
}

/* è®©æ—¥å¿—æ»šåŠ¨çš„åŒºåŸŸæ›´é«˜ */
.log-content {
    height: 250px !important; /* åŸæ¥æ˜¯ 150pxï¼Œç°åœ¨èƒ½çœ‹æ›´å¤šè¡Œ */
}
/* =========================================
   ğŸ”§ V42.0 - æ——èˆ°çº§å¯¼èˆªæ ä¿®å¤è¡¥ä¸
   (è¯·ç²˜è´´åˆ° style.css æœ€åº•éƒ¨ï¼Œè¦†ç›–ä¹‹å‰æ‰€æœ‰ header æ ·å¼)
   ========================================= */

/* 1. å¼ºåˆ¶é‡æ„ Header å®¹å™¨ */
.header {
    display: flex !important;
    justify-content: center !important; /* æ•´ä¸ªå®¹å™¨å±…ä¸­ */
    padding: 20px !important;
    height: auto !important;
}

/* 2. é‡ç½®å†…éƒ¨ div çš„å¸ƒå±€ (è¦†ç›– HTML å†…è”æ ·å¼) */
.header > div {
    display: flex !important;
    flex-direction: row !important;     /* å¼ºåˆ¶æ¨ªå‘æ’åˆ— */
    align-items: center !important;     /* å‚ç›´å±…ä¸­å¯¹é½ */
    justify-content: center !important; /* å†…å®¹å±…ä¸­ */
    gap: 40px !important;               /* æ ‡é¢˜å’ŒæŒ‰é’®ç»„ä¹‹é—´çš„é—´è·ï¼Œæ‹‰å¼€ä¸€ç‚¹æ‰å¤§æ°” */
    width: 100% !important;
    flex-wrap: wrap !important;         /* å±å¹•å¤ªå°è‡ªåŠ¨æ¢è¡Œï¼Œé˜²æŒ¤çˆ† */
}

/* 3. æ ‡é¢˜æ ·å¼å¾®è°ƒ */
.header h1 {
    margin: 0 !important;
    text-align: right !important;       /* æ ‡é¢˜é å³ä¸€ç‚¹ï¼Œå‘¼åº”æŒ‰é’® */
    font-size: 2.2rem !important;
    line-height: 1 !important;
}

/* 4. æŒ‰é’®ç»„æ ·å¼ */
.header .btn-group {
    position: static !important;        /* å½»åº•å–æ¶ˆå®šä½ */
    transform: none !important;
    margin: 0 !important;
    
    display: flex !important;
    gap: 15px !important;               /* æŒ‰é’®ä¹‹é—´çš„é—´è· */
    align-items: center !important;
}

/* 5. æ‰‹æœºç«¯é€‚é… (ä¸‡ä¸€ä½ ç¼©æ”¾æµè§ˆå™¨) */
@media (max-width: 850px) {
    .header > div {
        flex-direction: column !important; /* å±å¹•å¤ªçª„æ—¶æ‰å˜ç«–æ’ */
        gap: 20px !important;
    }
}